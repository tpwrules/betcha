{% extends "betcha_app/betcha_base.html" %}

{% block main %}
<h2>This Week's Games</h2>

<div class="description">
    <p>This page contains a sample sidebar and a sample table.  Neat, ain't it.</p>
</div>

<p style="color:red;">
    {% for error in errors %}
    <b>ERROR: {{ error }}</b><br />
    {% endfor %}
</p>

<form action="/" method="post">
    {% csrf_token %}
    <table style="width:100%" id="TeamTable">
        <tr>
            <th>Favorite</th>
            <th>Underdog</th>
            <th>High Risk</th>
            <th>Line</th>
            <th>TV</th>
            <th>Date/Time</th>
        </tr>

        {% for game, bet in bet_data %}
        <tr>
        {% if bet is None %}
            <td><label><input type="radio" name="g{{ game.id }}" value="{{ game.favorite_letter }}" /><span style="font-weight:{% if game.favorite_is_home %}bold{% else %}normal{% endif %}">{{ game.favorite }}</span>{{ game.favorite_score }}</label></td>
            <td><label><input type="radio" name="g{{ game.id }}" value="{{ game.underdog_letter }}" /><span style="font-weight:{% if not game.favorite_is_home %}bold{% else %}normal{% endif %}">{{ game.underdog }}</span>{{ game.underdog_score }}</label></td>
        {% else %}
            <td><label><input type="radio" name="g{{ game.id }}" value="{{ game.favorite_letter }}" {{ bet.favorite_check }} /><span style="font-weight:{% if game.favorite_is_home %}bold{% else %}normal{% endif %}">{{ game.favorite }}</span>{{ game.favorite_score }}</label></td>
            <td><label><input type="radio" name="g{{ game.id }}" value="{{ game.underdog_letter }}" {{ bet.underdog_check }} /><span style="font-weight:{% if not game.favorite_is_home %}bold{% else %}normal{% endif %}">{{ game.underdog }}</span>{{ game.underdog_score }}</label></td>
        {% endif %}
        <td><label><input type="radio" name="high_risk" value="g{{ game.id }}" {{ bet.high_risk_check }}/>High Risk</label></td>
        <td>{{ game.line }}</td>
        <td>{{ game.tv_channel }}</td>
        <td>{{ game.game_time }}</td>
        </tr>
        {% endfor %}
    </table>

    <p>
        <label><input type="radio" name="high_risk" value="none" {{ no_high_risk_check }}>No High Risk Bet</label>
        <br /><br />
        Game of the week: {{ week.game_of_such.team_A }} vs. {{ week.game_of_such.team_B }} (Tie Breaker) [Total Points Scored] 
        <input type="text" name="points_gotw" value={{betting_sheet.gotw_points}} />
    </p>

    <input type="submit" value="Update Bets" />

</form>

<p>
    Current Rankings: garbagely
    <ol>
    {% for better, score in week.calculate_rank %}
        <li>{{ better.user.username }} with {{ score }} points</li>
    {% endfor %}
    </ol>
</p>
{% endblock %}